<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Specification - Spyglass documentation</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Specification | Spyglass documentation</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Specification" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Development tools for vanilla Minecraft: Java Edition data pack developers." /> <meta property="og:description" content="Development tools for vanilla Minecraft: Java Edition data pack developers." /> <link rel="canonical" href="https://spyglassmc.com/user/mcdoc/specification.html" /> <meta property="og:url" content="https://spyglassmc.com/user/mcdoc/specification.html" /> <meta property="og:site_name" content="Spyglass documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Specification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Development tools for vanilla Minecraft: Java Edition data pack developers.","headline":"Specification","url":"https://spyglassmc.com/user/mcdoc/specification.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Spyglass documentation </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Home</a><ul class="nav-list "><li class="nav-list-item "><a href="/user/commands.html" class="nav-list-link">Commands</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/user/config.html" class="nav-list-link">Config</a><ul class="nav-list"><li class="nav-list-item "> <a href="/user/lint/nameOfNbtKey.html" class="nav-list-link">nameOfNbtKey</a> </li><li class="nav-list-item "> <a href="/user/lint/nameOfObjective.html" class="nav-list-link">nameOfObjective</a> </li><li class="nav-list-item "> <a href="/user/lint/nameOfScoreHolder.html" class="nav-list-link">nameOfScoreHolder</a> </li><li class="nav-list-item "> <a href="/user/lint/nameOfTag.html" class="nav-list-link">nameOfTag</a> </li><li class="nav-list-item "> <a href="/user/lint/nameOfTeam.html" class="nav-list-link">nameOfTeam</a> </li><li class="nav-list-item "> <a href="/user/lint/undeclaredSymbol.html" class="nav-list-link">undeclaredSymbol</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/user/mcdoc/" class="nav-list-link">Mcdoc</a><ul class="nav-list"><li class="nav-list-item "> <a href="/user/mcdoc/attributes.html" class="nav-list-link">Attributes</a> </li><li class="nav-list-item active"> <a href="/user/mcdoc/specification.html" class="nav-list-link active">Specification</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/developer/" class="nav-list-link">Developer Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="/developer/meta-registry.html" class="nav-list-link">Meta Registry</a></li><li class="nav-list-item "><a href="/developer/language-server/capabilities.html" class="nav-list-link">Custom Server Capabilities</a></li><li class="nav-list-item "><a href="/developer/language-server/initialization-options.html" class="nav-list-link">Initialization Options</a></li><li class="nav-list-item "><a href="/developer/web-api.html" class="nav-list-link">Web API</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/maintainer/" class="nav-list-link">Maintainer Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="/maintainer/profilers.html" class="nav-list-link">Profilers</a></li><li class="nav-list-item "><a href="/maintainer/update_guide.html" class="nav-list-link">Update Guide</a></li></ul></li><li class="nav-list-item external"> <a href="https://spyglassmc.com/playground/" class="nav-list-link external"> Playground </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Spyglass documentation" aria-label="Search Spyglass documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Home</a></li> <li class="breadcrumb-nav-list-item"><a href="/user/mcdoc/">Mcdoc</a></li> <li class="breadcrumb-nav-list-item"><span>Specification</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <div id="toc" class="toc"> <div id="toctitle">Table of Contents</div> <ul class="sectlevel1"> <li><a href="#project-root">Project root</a></li> <li><a href="#syntax-syntax">Syntax syntax</a></li> <li><a href="#comments">Comments</a></li> <li><a href="#doc-comments">Doc comments</a></li> <li><a href="#integer">Integer</a></li> <li><a href="#float">Float</a></li> <li><a href="#typed-number">Typed Number</a></li> <li><a href="#number-range">Number range</a></li> <li><a href="#string">String</a></li> <li><a href="#resource-location">Resource location</a></li> <li><a href="#identifier">Identifier</a></li> <li><a href="#path">Path</a></li> <li><a href="#type">Type</a> <ul class="sectlevel2"> <li><a href="#any-type"><code>any</code> type</a></li> <li><a href="#boolean-type"><code>boolean</code> type</a></li> <li><a href="#string-type"><code>string</code> type</a></li> <li><a href="#literal-boolean-type">Literal boolean type</a></li> <li><a href="#literal-string-type">Literal string type</a></li> <li><a href="#literal-number-type">Literal number type</a></li> <li><a href="#numeric-type">Numeric type</a></li> <li><a href="#primitive-array-type">Primitive array type</a></li> <li><a href="#list-type">List type</a></li> <li><a href="#tuple-type">Tuple type</a></li> <li><a href="#enum">Enum</a></li> <li><a href="#struct">Struct</a></li> <li><a href="#reference-type">Reference type</a></li> <li><a href="#dispatcher-type">Dispatcher type</a></li> <li><a href="#union-type">Union type</a></li> <li><a href="#indexing-on-a-type">Indexing on a type</a></li> </ul> </li> <li><a href="#file-structure">File Structure</a></li> <li><a href="#type-alias-statement">Type alias statement</a> <ul class="sectlevel2"> <li><a href="#binding-type-parameters">Binding type parameters</a></li> </ul> </li> <li><a href="#use-statement">Use statement</a></li> <li><a href="#injection">Injection</a></li> <li><a href="#dispatch-statement">Dispatch statement</a></li> <li><a href="#attribute">Attribute</a></li> <li><a href="#type-instantiation">Type instantiation</a> <ul class="sectlevel2"> <li><a href="#instantiate-indexed-type">Instantiate indexed type</a></li> <li><a href="#instantiate-self-contained-type">Instantiate self-contained type</a></li> <li><a href="#instantiate-container-type">Instantiate container type</a></li> <li><a href="#instantiate-reference-type">Instantiate reference type</a></li> <li><a href="#instantiate-dispatcher-type">Instantiate dispatcher type</a></li> <li><a href="#union-type-2">Union type</a></li> <li><a href="#aftermath-of-instantiation">Aftermath of instantiation</a></li> </ul> </li> <li><a href="#type-simplification">Type simplification</a> <ul class="sectlevel2"> <li><a href="#shadowed-types">Shadowed types</a></li> </ul> </li> <li><a href="#type-assignability">Type assignability</a></li> <li><a href="#branding">Branding</a></li> <li><a href="#credits">Credits</a></li> </ul> </div> <div class="paragraph"> <p>This document defines the syntax and semantics of the mcdoc format.</p> </div> <div class="sect1"> <h2 id="project-root"> <a href="#project-root" class="anchor-heading" aria-labelledby="project-root"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project root </h2> <div class="sectionbody"> <div class="paragraph"> <p>Normally, the <strong>workspace</strong> (the directory where the mcdoc interpreter operates: for command line tools, this could be the working directory; for code editors like VS Code, this could be the root directory shown in the sidebar explorer) is considered as the <strong>root</strong> of a mcdoc project.</p> </div> <div class="paragraph"> <p>If, however, there exists a folder named <code>mcdoc</code> directly under the workspace and all <code>mcdoc</code> files inside the workspace are stored under that direcotry, it will be considered as the root instead.</p> </div> </div> </div> <div class="sect1"> <h2 id="syntax-syntax"> <a href="#syntax-syntax" class="anchor-heading" aria-labelledby="syntax-syntax"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Syntax syntax </h2> <div class="sectionbody"> <div class="paragraph"> <p>Here is the syntax used by this document to describe the syntax of mcdoc&#8201;&#8212;&#8201;syntax syntax, if you wish.</p> </div> <div class="table-wrapper"><table id="tb-syntax-syntax" class="tableblock frame-all grid-all stretch"> <caption class="title">Table 1. Syntax syntax</caption> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Symbol</th> <th class="tableblock halign-left valign-top">Meaning</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>str</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Literal <code>str</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">U+<code>xxxx</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Unicode character with the code point <code>xxxx</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sup>*</sup></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A repeated zero or more times</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sup>+</sup></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A repeated one or more times</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sup>?</sup></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A repeated zero or one times</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A | B</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Either A or B</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">[<code>A</code> <code>B</code> <code>C</code>]</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">One of the literals <code>A</code>, <code>B</code>, or <code>C</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">[<code>A</code>-<code>Z</code>]</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Any literal from <code>A</code> to <code>Z</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">(A)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">General grouping</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><sub>not</sub>A</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Anything not A</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sub>except: B</sub></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A except B</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sub>lookahead: B</sub></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A followed by B, but only consumes A</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">A<sub>nochild: B</sub></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A but B should not be a child of it</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#token-rule">NAME</a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A referenced <a href="#token-rule">token rule</a></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#parser-rule"><em>Name</em></a></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A referenced <a href="#parser-rule">parser rule</a></p></td> </tr> </tbody> </table></div> <div id="token-rule" class="paragraph"> <p>A token rule syntax cannot have any whitespaces (spaces, tabs, CRs, or LFs) or tokens in between the individual parts.</p> </div> <div id="parser-rule" class="paragraph"> <p>A parser rule syntax can have whitespaces and <a href="#t-comments">COMMENTS</a> in between.</p> </div> <div class="paragraph"> <p>All syntax rules should be greedy (i.e. consume as many characters as possible).</p> </div> </div> </div> <div class="sect1"> <h2 id="comments"> <a href="#comments" class="anchor-heading" aria-labelledby="comments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Comments </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-comments" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-comments">COMMENTS</a></dt> <dd> <p><a href="#t-comment">COMMENT</a><sup>*</sup></p> </dd> </dl> </div> <div id="t-comment" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-comment">COMMENT</a></dt> <dd> <p><code>//</code> <sub>lookahead: <sub>not</sub><code>/</code></sub> (<sub>not</sub><a href="#t-eol">EOL</a>)<sup>*</sup> (<a href="#t-eol">EOL</a> | <a href="#t-eof">EOF</a>)</p> </dd> </dl> </div> <div id="t-eol" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-eol">EOL</a></dt> <dd> <p>End of line: CR (Unicode <code>U+000D</code>) or LF (Unicode <code>U+000A</code>).</p> </dd> </dl> </div> <div id="t-eof" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-eof">EOF</a></dt> <dd> <p>End of file.</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>Comments can be used in mcdoc to write information that can be seen only by other users viewing/editing your mcdoc files. They are ignored by a mcdoc interpreter.</p> </div> <div class="paragraph"> <p>To write a comment, simply put down two forward slashes (<code>//</code>)&#8201;&#8212;&#8201;everything following them, until the end of the line, is treated as part of the comment. They can be put anywhere where a whitespace is allowed. Comments, however, cannot start with triple slashes (<code>///</code>), as that&#8217;s reserved for <a href="#doc-comments">Doc comments</a>.</p> </div> <div class="exampleblock"> <div class="title">Example 1. Comments</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="c1">// This is a comment.</span>
<span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
	<span class="n">Bar</span><span class="p">:</span> <span class="n">boolean</span><span class="p">,</span> <span class="c1">// This is another one.</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="doc-comments"> <a href="#doc-comments" class="anchor-heading" aria-labelledby="doc-comments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Doc comments </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-prelim" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-prelim"><em>Prelim</em></a></dt> <dd> <p><a href="#s-doc-comments"><em>DocComments</em></a> <a href="#s-attributes"><em>Attributes</em></a></p> </dd> </dl> </div> <div id="s-doc-comments" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-doc-comments"><em>DocComments</em></a></dt> <dd> <p><a href="#t-doc-comment">DOC_COMMENT</a><sup>*</sup><br> Although this is a syntax rule, no regular comments are allowed between the individual <a href="#t-doc-comment">DOC_COMMENT</a>. Only whitespaces (including newlines) should be allowed.</p> </dd> </dl> </div><hr> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-doc-comment" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-doc-comment">DOC_COMMENT</a></dt> <dd> <p><code>///</code> (<sub>not</sub><a href="#t-eol">EOL</a>)<sup>*</sup> (<a href="#t-eol">EOL</a> | <a href="#t-eof">EOF</a>)</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>Doc comments are similar to comments syntax-wise&#8201;&#8212;&#8201;they start with triple slashes (<code>///</code>) instead. A block of doc comments can provide human-readable documentation for the component right after it to users of your mcdoc files. Unlike regular comments, doc comments can only be put in front of enum definitions, enum fields, struct definitions, struct fields, and type aliases, as part of <a href="#prelim">[prelim]</a>s.</p> </div> <div class="paragraph"> <p>The text content of a doc comment block should be treated as a MarkDown content, with the leading triple slashes (and up to one leading space after the slashes if all lines within the block share that one leading space) stripped.</p> </div> <div class="exampleblock"> <div class="title">Example 2. Doc comments</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="cd">/// This doc comment describes the struct Foo.</span>
<span class="cd">/// External tools, like VS Code, may show this block of text when the user hovers over the name "Foo".</span>
<span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
	<span class="cd">/// This is another doc comment describing the field "Bar".</span>
	<span class="n">Bar</span><span class="p">:</span> <span class="n">boolean</span><span class="p">,</span> <span class="c1">// This is just a regular comment because it only starts with two slashes.</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> <div class="admonitionblock tip"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> As the content of a doc comment block is treated as MarkDown, certain characters might have special meaning. For example, if you write <code>&lt;foo&gt;</code> inside the doc comment, it might disappear when being shown to a user, as it may get interperted as an XML tag by a MarkDown parser. Escaping those special characters with a backslash (<code>\</code>) (e.g. <code>\&lt;foo&gt;</code>) will fix this. </td> </tr> </table></div> </div> </div> </div> <div class="sect1"> <h2 id="integer"> <a href="#integer" class="anchor-heading" aria-labelledby="integer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integer </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-integer" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-integer">INTEGER</a></dt> <dd> <p><code>0</code> |<br> [<code>-</code> <code>+</code>]<sup>?</sup> [<code>1</code>-<code>9</code>] [<code>0</code>-<code>9</code>]<sup>*</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>An integer represents a whole number.</p> </div> <div class="exampleblock"> <div class="title">Example 3. Integers</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="mi">0</span>
<span class="o">+</span><span class="mi">123</span>
<span class="o">-</span><span class="mi">456</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="float"> <a href="#float" class="anchor-heading" aria-labelledby="float"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Float </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-float" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-float">FLOAT</a></dt> <dd> <p>[<code>-</code> <code>+</code>]<sup>?</sup> [<code>0</code>-<code>9</code>]<sup>+</sup> <a href="#t-float-exp">FLOAT_EXPONENT</a><sup>?</sup> |<br> [<code>-</code> <code>+</code>]<sup>?</sup> [<code>0</code>-<code>9</code>]<sup>*</sup> <code>.</code> [<code>0</code>-<code>9</code>]<sup>+</sup> <a href="#t-float-exp">FLOAT_EXPONENT</a><sup>?</sup></p> </dd> </dl> </div> <div id="t-float-exp" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-float-exp">FLOAT_EXPONENT</a></dt> <dd> <p>[<code>e</code> <code>E</code>] [<code>-</code> <code>+</code>]<sup>?</sup> [<code>0</code>-<code>9</code>]<sup>+</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A float represents a decimal number. Scientific notation may be used with the letter <code>e</code> (case-insensitive).</p> </div> <div class="exampleblock"> <div class="title">Example 4. Floats</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="mi">1</span>
<span class="o">+</span><span class="mf">1.2</span>
<span class="o">-</span><span class="mf">1.2e3</span> <span class="c1">// -1.2×10<sup>3</sup></span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="typed-number"> <a href="#typed-number" class="anchor-heading" aria-labelledby="typed-number"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Typed Number </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-typed-number" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-typed-number">TYPED_NUMBER</a></dt> <dd> <p><a href="#t-integer">INTEGER</a> [<code>b</code> <code>B</code> <code>s</code> <code>S</code> <code>l</code> <code>L</code>]<sup>?</sup> |<br> <a href="#t-float">FLOAT</a> [<code>d</code> <code>D</code> <code>f</code> <code>F</code>]<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A typed number is similar to a number used in SNBTs syntax-wise. It&#8217;s a normal number followed by a suffix indicating its type:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 2. Suffix table</caption> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Suffix (case-insensitive)</th> <th class="tableblock halign-left valign-top">Type</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>b</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Byte</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>s</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Short</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>L</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>f</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Float</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>d</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">(No suffix, integer)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">(No suffix, decimal)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Double</p></td> </tr> </tbody> </table></div> <div class="exampleblock"> <div class="title">Example 5. Typed numbers</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="mi">1</span><span class="n">b</span>      <span class="c1">// Byte 1</span>
<span class="mi">1</span>       <span class="c1">// Integer 1</span>
<span class="mf">1.2</span>     <span class="c1">// Double 1.2</span>
<span class="mf">1.2</span><span class="n">d</span>    <span class="c1">// Double 1.2</span>
<span class="mf">1.2e1</span><span class="n">f</span>  <span class="c1">// Float 12</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="number-range"> <a href="#number-range" class="anchor-heading" aria-labelledby="number-range"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Number range </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-float-range" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-float-range">FLOAT_RANGE</a></dt> <dd> <p><a href="#t-range-delimiter">RANGE_DELIMITER</a><sup>?</sup> <a href="#t-float">FLOAT</a> |<br> <a href="#t-float">FLOAT</a> <a href="#t-range-delimiter">RANGE_DELIMITER</a> <a href="#t-float">FLOAT</a><sup>?</sup></p> </dd> </dl> </div> <div id="t-range-delimiter" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-range-delimiter">RANGE_DELIMITER</a></dt> <dd> <p><code>..</code> |<br> <code>..&lt;</code> |<br> <code>&lt;..</code> |<br> <code>&lt;..&lt;</code></p> </dd> </dl> </div> <div id="t-int-range" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-int-range">INT_RANGE</a></dt> <dd> <p><a href="#t-range-delimiter">RANGE_DELIMITER</a><sup>?</sup> <a href="#t-integer">INTEGER</a> |<br> <a href="#t-integer">INTEGER</a> <a href="#t-range-delimiter">RANGE_DELIMITER</a> <a href="#t-integer">INTEGER</a><sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A number range represents a range of number. Its syntax derives from number ranges used in Minecraft commands, with additional support for signaling an exclusive end using the strictly less than symbol (<code>&lt;</code>). There are two types of ranges in mcdoc: float ranges, which consist of <a href="#float">Float</a>s, and integer ranges, which consists of <a href="#integer">Integer</a>s.</p> </div> <div class="exampleblock"> <div class="title">Example 6. Number ranges</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="mi">1</span>      <span class="c1">// Exactly 1</span>
<span class="mi">1</span><span class="o">..</span><span class="mi">1</span>   <span class="c1">// Exactly 1</span>
<span class="mi">1</span><span class="o">..</span><span class="mi">2</span>   <span class="c1">// Between 1 and 2 (inclusive on ends)</span>
<span class="mi">1</span><span class="o">&lt;..&lt;</span><span class="mi">2</span> <span class="c1">// Between 1 and 2 (exclusive on ends)</span>
<span class="mf">4.2</span><span class="o">..</span>  <span class="c1">// Greater than or equal to 4.2</span>
<span class="mf">4.2</span><span class="o">&lt;..</span> <span class="c1">// Greater than 4.2</span>
<span class="o">..</span><span class="mf">9.1</span>  <span class="c1">// Smaller than or equal to 9.1</span>
<span class="o">..&lt;</span><span class="mf">9.1</span> <span class="c1">// Smaller than 9.1</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="string"> <a href="#string" class="anchor-heading" aria-labelledby="string"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> String </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-string" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-string">STRING</a></dt> <dd> <p><code>"</code> (<sub>not</sub>[<code>"</code> <code>\</code> <a href="#t-unicode-cc">UNICODE_CC</a>] | (<code>\</code> [<code>b</code> <code>f</code> <code>n</code> <code>r</code> <code>t</code> <code>\</code> <code>"</code>]))<sup>*</sup> <code>"</code></p> </dd> </dl> </div> <div id="t-unicode-cc" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-unicode-cc">UNICODE_CC</a></dt> <dd> <p>Unicode control characters.</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A string represents a sequence of characters. It must be surrounded by double quotation marks (<code>"</code>). Certain characters need to be escaped by a backslash (<code>\</code>).</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 3. Escape characters</caption> <colgroup> <col style="width: 50%;"> <col style="width: 50%;"> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Escape sequence</th> <th class="tableblock halign-left valign-top">Meaning</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\"</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A double quotation mark (<code>"</code>, Unicode <code>U+0022</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\\</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A backslash (<code>\</code>, Unicode <code>U+005C</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\b</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A backspace (Unicode <code>U+0008</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\f</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A form feed (Unicode <code>U+000C</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\n</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A newline (Unicode <code>U+000A</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\r</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A carriage return (Unicode <code>U+000D</code>)</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>\t</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A tab (Unicode <code>U+0009</code>)</p></td> </tr> </tbody> </table></div> <div class="exampleblock"> <div class="title">Example 7. Strings</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="s">"foo"</span>            <span class="c1">// A string representing <code>foo</code></span>
<span class="s">"bar</span><span class="se">\"</span><span class="s">qux</span><span class="se">\\</span><span class="s">baz"</span>  <span class="c1">// A string representing <code>bar"qux\baz</code></span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="resource-location"> <a href="#resource-location" class="anchor-heading" aria-labelledby="resource-location"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resource location </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-res-loc" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-res-loc">RES_LOC</a></dt> <dd> <p><a href="#t-res-loc-char">RES_LOC_CHAR</a><sup>*</sup> <code>:</code> <a href="#t-res-loc-char">RES_LOC_CHAR</a><sup>*</sup> (<code>/</code> <a href="#t-res-loc-char">RES_LOC_CHAR</a><sup>*</sup>)<sup>*</sup></p> </dd> </dl> </div> <div id="t-res-loc-char" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-res-loc-char">RES_LOC_CHAR</a></dt> <dd> <p>[<code>a</code>-<code>z</code> <code>0</code>-<code>9</code> <code>-</code> <code>_</code> <code>.</code>]</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A resource location is similar to the resource location from Minecraft syntax-wise, except that a colon (<code>:</code>) must exist to disambiguate this from an <a href="#identifier">Identifier</a>.</p> </div> <div class="exampleblock"> <div class="title">Example 8. Resource locations</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="n">minecraft</span><span class="p">:</span><span class="n">foo</span>
<span class="p">:</span><span class="n">foo</span>  <span class="c1">// This also means <code>minecraft:foo</code>, and is legal in Minecraft itself.</span>
<span class="n">spyglassmc</span><span class="p">:</span><span class="n">bar</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="identifier"> <a href="#identifier" class="anchor-heading" aria-labelledby="identifier"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Identifier </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-ident" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-ident">IDENTIFIER</a></dt> <dd> <p>((<a href="#t-ident-start">IDENT_START</a>) (<a href="#t-ident-continue">IDENT_CONTINUE</a>)<sup>*</sup>)<sub>except: <a href="#t-reserved-words">RESERVED_WORDS</a></sub></p> </dd> </dl> </div> <div id="t-ident-start" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-ident-start">IDENT_START</a></dt> <dd> <p>Any character in the <a href="https://unicode.org/reports/tr18/#General_Category_Property">Unicode general categories</a> &#8220;Letter (<code>L</code>)&#8221; or &#8220;Letter Number (<code>Nl</code>)&#8221;</p> </dd> </dl> </div> <div id="t-ident-continue" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-ident-continue">IDENT_CONTINUE</a></dt> <dd> <p><a href="#t-ident-start">IDENT_START</a> | U+<code>200C</code> | U+<code>200D</code> | (any character in the Unicode general categories &#8220;Non-Spacing Mark (<code>Mn</code>)&#8221;, &#8220;Spacing Combining Mark (<code>Mc</code>)&#8221;, &#8220;Decimal Digit Number (<code>Nd</code>)&#8221;, or &#8220;Connector Punctuation (<code>Pc</code>)&#8221;)</p> </dd> </dl> </div> <div id="t-reserved-words" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-reserved-words">RESERVED_WORDS</a></dt> <dd> <p><code>any</code> | <code>boolean</code> | <code>byte</code> | <code>double</code> | <code>enum</code> | <code>false</code> | <code>float</code> | <code>int</code> | <code>long</code> | <code>short</code> | <code>string</code> | <code>struct</code> | <code>super</code> | <code>true</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>An identifier is a case-sensitive name given to a type definition in mcdoc. It can contain any Unicode letters, numbers, and the underscore (<code>_</code>), but must not start with a digit.</p> </div> <div class="paragraph"> <p>It also must not be named after a list of <a href="#t-reserved-words">reserved words</a>.</p> </div> <div class="exampleblock"> <div class="title">Example 9. Identifiers</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="o"><strong></span><span class="n">Foo</span><span class="o"></strong></span> <span class="p">{</span> <span class="c1">// <code>Foo</code> is an identifier.</span>
	<span class="o"><strong></span><span class="n">B_1</span><span class="o"></strong></span><span class="p">:</span> <span class="n">boolean</span><span class="p">,</span> <span class="c1">// <code>B_1</code> is an identifier.</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="path"> <a href="#path" class="anchor-heading" aria-labelledby="path"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Path </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-path" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-path">PATH</a></dt> <dd> <p>(<code>::</code>)<sup>?</sup> <a href="#t-path-seg">PATH_SEGMENT</a> (<code>::</code> <a href="#t-path-seg">PATH_SEGMENT</a>)<sup>*</sup></p> </dd> </dl> </div> <div id="t-path-seg" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-path-seg">PATH_SEGMENT</a></dt> <dd> <p><a href="#t-ident">IDENTIFIER</a> | <code>super</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A path is used to locate a type definition across the mcdoc project. A sequence of two colons (<code>::</code>) is used as the <strong>path separater</strong>.</p> </div> <div class="paragraph"> <p>If a path starts with the path separater, it is an <strong>absolute path</strong> and will be resolved from the <a href="#project-root">project root</a>. Otherwise it is a <strong>relative path</strong> and will be resolved from the absolute path of the current file.</p> </div> <div class="paragraph"> <p>The absolute path of a file is determined by connecting the names of all its parent folders up until the root and the file&#8217;s own name (excluding the <code>.mcdoc</code> file extension) with the path separater, prepended by the path separater, with a special case for files named <code>mod.mcdoc</code>&#8201;&#8212;&#8201;they will not be part of their paths.</p> </div> <div class="paragraph"> <p>The absolute path of a type definition is the absolute path of the file where it resides joined with the identifier of the type definition by the path separater.</p> </div> <div class="paragraph"> <p>If multiple files/type definitions ended up having the same path, only the earliest loaded one will take effect; all subsequent ones should be warned and ignored by the mcdoc interpreter.</p> </div> <div class="paragraph"> <p>For relative paths, the keyword <code>super</code> may be used to move up one level from the current absolute path.</p> </div> <div class="exampleblock"> <div class="title">Example 10. Paths</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code>/
	foo.mcdoc <i class="conum" data-value="1"></i><b>(1)</b>
	foo/
		bar.mcdoc <i class="conum" data-value="2"></i><b>(2)</b>
		mod.mcdoc <i class="conum" data-value="3"></i><b>(3)</b>
	qux.mcdoc <i class="conum" data-value="4"></i><b>(4)</b></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The absolute path of this file is <code>::foo</code>.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The absolute path of this file is <code>::foo::bar</code>.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>The absolute path of this file is <code>::foo</code> instead of <code>::foo::mod</code>, as files named <code>mod.mcdoc</code> are special. This has the same path as &lt;1&gt;, and as &lt;1&gt; is shallower in the file structure, it is loaded first, meaning &lt;3&gt; is ignored in favor of &lt;1&gt; and a warning should be given.</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>The absolute path of this file is <code>::qux</code>.</td> </tr> </table></div> </div> <div class="paragraph"> <p>If the content of <code>/foo/bar.mcdoc</code> is</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{}</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">type</span> <span class="n">Bar</span> <span class="o">=</span> <span class="k">super</span><span class="p">::</span><span class="k">super</span><span class="p">::</span><span class="nn">qux</span><span class="p">::</span><span class="n">Something</span> <i class="conum" data-value="2"></i><b>(2)</b></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The absolute path for struct <code>Foo</code> is <code>::foo::bar::Foo</code></td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The absolute path for type alias <code>Bar</code> is <code>::foo::bar::Bar</code>.<br> The relative path is interpreted as follows: <div class="olist arabic"> <ol class="arabic"> <li> <p>Absolute path of the residing file (<code>/foo/bar.mcdoc</code>) is <code>::foo::bar</code>. The given relative path is <code>super::super::qux::Something</code>.</p> </li> <li> <p>Encounters keyword <code>super</code>, moves one level up to <code>::foo</code>. Remaining relative path is <code>super::qux::Something</code>.</p> </li> <li> <p>Encounters keyword <code>super</code>, moves one level up to <code>::</code>. Remaining relative path is <code>qux::Something</code>.</p> </li> <li> <p>Encounters identifier <code>qux</code>, moves down to <code>::qux</code>. Remaining relative path is <code>Something</code>.</p> </li> <li> <p>Encounters identifier <code>Something</code>, moves down to <code>::qux::Something</code>. Relative path has been resolved.</p> </li> <li> <p>The type alias <code>Bar</code> therefore points to the type definition named <code>Something</code> in file <code>/qux.mcdoc</code>.</p> </li> </ol> </div></td> </tr> </table></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="type"> <a href="#type" class="anchor-heading" aria-labelledby="type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-type"><em>Type</em></a></dt> <dd> <p><a href="#s-attributes"><em>Attributes</em></a> <a href="#s-unattributed-type"><em>UnattributedType</em></a> (<a href="#s-index-body"><em>IndexBody</em></a> | <a href="#s-type-arg-block"><em>TypeArgBlock</em></a>)<sup>*</sup></p> </dd> </dl> </div> <div id="s-unattributed-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-unattributed-type"><em>UnattributedType</em></a></dt> <dd> <p><a href="#s-keyword-type"><em>KeywordType</em></a> |<br> <a href="#s-string-type"><em>StringType</em></a> |<br> <a href="#s-literal-type"><em>LiteralType</em></a> |<br> <a href="#s-numeric-type"><em>NumericType</em></a> |<br> <a href="#s-primitive-array-type"><em>PrimitiveArrayType</em></a> |<br> <a href="#s-list-type"><em>ListType</em></a> |<br> <a href="#s-tuple-type"><em>TupleType</em></a> |<br> <a href="#s-enum"><em>Enum</em></a> |<br> <a href="#s-struct"><em>Struct</em></a> |<br> <a href="#s-reference-type"><em>ReferenceType</em></a> |<br> <a href="#s-dispatcher-type"><em>DispatcherType</em></a> |<br> <a href="#s-union-type"><em>UnionType</em></a></p> </dd> </dl> </div> <div id="s-type-arg-block" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-type-arg-block"><em>TypeArgBlock</em></a></dt> <dd> <p><code>&lt;</code> <code>&gt;</code> |<br> <code>&lt;</code> <a href="#s-type"><em>Type</em></a> (<code>,</code> <a href="#s-type"><em>Type</em></a>)<sup>*</sup> <code>,</code><sup>?</sup> <code>&gt;</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A type is an essential component of the mcdoc format. It defines a schema that actual data values must fit in to be valid.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Mcdoc may be used to describe the format of a wide range of data. This section will only provide some JSON data as examples for each type. </td> </tr> </table></div> </div> <div class="sect2"> <h3 id="any-type"> <a href="#any-type" class="anchor-heading" aria-labelledby="any-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code>any</code> type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-keyword-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-keyword-type"><em>KeywordType</em></a></dt> <dd> <p><code>any</code> |<br> <code>boolean</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>The <code>any</code> type serves as the top type of mcdoc&#8217;s type system. Any another types, including <code>any</code> itself, are assignable to <code>any</code>. <code>any</code> cannot be assigned to any other types other than <code>any</code>.</p> </div> <div class="exampleblock"> <div class="title">Example 11. Valid values for the <code>any</code> type</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="json"><span class="kc">null</span><span class="w">
</span><span class="kc">true</span><span class="w">
</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="nl">"foo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="p">}</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="boolean-type"> <a href="#boolean-type" class="anchor-heading" aria-labelledby="boolean-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code>boolean</code> type </h3> <div class="paragraph"> <p>The <code>boolean</code> type indicates a boolean value (<code>false</code> or <code>true</code>) is expected.</p> </div> <div class="exampleblock"> <div class="title">Example 12. Valid values for the <code>boolean</code> type</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="json"><span class="kc">false</span><span class="w">
</span><span class="kc">true</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="string-type"> <a href="#string-type" class="anchor-heading" aria-labelledby="string-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <code>string</code> type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-string-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-string-type"><em>StringType</em></a></dt> <dd> <p><code>string</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>The <code>string</code> type indicates a string value is expected. The optional range defines the range of the length of the string.</p> </div> <div class="exampleblock"> <div class="title">Example 13. Valid values for the <code>string</code> type</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="json"><span class="s2">"foo"</span><span class="w">
</span><span class="s2">"bar"</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="literal-boolean-type"> <a href="#literal-boolean-type" class="anchor-heading" aria-labelledby="literal-boolean-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Literal boolean type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-literal-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-literal-type"><em>LiteralType</em></a></dt> <dd> <p><code>false</code> | <code>true</code> | <a href="#t-string">STRING</a> | <a href="#t-typed-number">TYPED_NUMBER</a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A literal boolean type is one of the two boolean values (<code>false</code> and <code>true</code>) that the data must match to be valid.</p> </div> <div class="exampleblock"> <div class="title">Example 14. Literal boolean types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="json"><span class="kc">false</span><span class="w">
</span><span class="kc">true</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="literal-string-type"> <a href="#literal-string-type" class="anchor-heading" aria-labelledby="literal-string-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Literal string type </h3> <div class="paragraph"> <p>A literal string type is a string value the data must match literally to be valid.</p> </div> <div class="exampleblock"> <div class="title">Example 15. Literal string types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="s">""</span>
<span class="s">"foo"</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="literal-number-type"> <a href="#literal-number-type" class="anchor-heading" aria-labelledby="literal-number-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Literal number type </h3> <div class="paragraph"> <p>A literal number type includes a numeric value and a type the data must match literally to be valid.</p> </div> <div class="exampleblock"> <div class="title">Example 16. Literal number types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="o">-</span><span class="mi">1</span>
<span class="mf">1.2</span><span class="n">f</span>
<span class="mi">42</span><span class="n">L</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="numeric-type"> <a href="#numeric-type" class="anchor-heading" aria-labelledby="numeric-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Numeric type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-numeric-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-numeric-type"><em>NumericType</em></a></dt> <dd> <p><code>byte</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>short</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>int</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>long</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>float</code> (<code>@</code> <a href="#t-float-range">FLOAT_RANGE</a>)<sup>?</sup> |<br> <code>double</code> (<code>@</code> <a href="#t-float-range">FLOAT_RANGE</a>)<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A numeric type indicates the data must be of that type to be valid. If the optional <a href="#number-range">range</a> is provided, then the data must also fit into that range.</p> </div> <div class="exampleblock"> <div class="title">Example 17. Numeric types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="n">byte</span>
<span class="n">short</span><span class="o">@</span><span class="mi">1</span><span class="o">..</span>
<span class="nb">float</span> <span class="o">@</span> <span class="mf">4.2</span><span class="o">..</span><span class="mf">9.1</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="primitive-array-type"> <a href="#primitive-array-type" class="anchor-heading" aria-labelledby="primitive-array-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Primitive array type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-primitive-array-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-primitive-array-type"><em>PrimitiveArrayType</em></a></dt> <dd> <p><code>byte</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> <code>[]</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>int</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> <code>[]</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> |<br> <code>long</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup> <code>[]</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A primitive array type indicates the data must be a collection of certain numeric values. The first optional range defines the range the value must be in, while the second optional range defines the range of the size of the collection.</p> </div> <div class="exampleblock"> <div class="title">Example 18. Primitive array types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="n">byte</span><span class="p">[]</span>              <span class="c1">// A collection of bytes.</span>
<span class="n">byte</span><span class="err">#</span><span class="mi">0</span><span class="o">..</span><span class="mi">1</span><span class="p">[]</span>         <span class="c1">// A collection of bytes 0 or 1.</span>
<span class="nb">int</span><span class="p">[]</span> <span class="err">#</span> <span class="mi">4</span>           <span class="c1">// A collection of 4 integers.</span>
<span class="n">long</span><span class="err">#</span><span class="mi">0</span><span class="o">..</span><span class="p">[]</span> <span class="err">#</span> <span class="mi">3</span><span class="o">..</span>    <span class="c1">// A collection of 3 or more non-negative longs.</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="list-type"> <a href="#list-type" class="anchor-heading" aria-labelledby="list-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-list-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-list-type"><em>ListType</em></a></dt> <dd> <p><code>[</code> <a href="#s-type"><em>Type</em></a> <code>]</code> (<code>@</code> <a href="#t-int-range">INT_RANGE</a>)<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A list type indicates the data must be a collection of a certain other type. The optional range defines the range of the size of the collection.</p> </div> <div class="exampleblock"> <div class="title">Example 19. List types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="p">[</span><span class="n">byte</span><span class="p">]</span>          <span class="c1">// A collection of bytes.</span>
<span class="p">[[</span><span class="n">string</span><span class="p">]]</span>      <span class="c1">// A collection of collections of strings.</span>
<span class="p">[</span><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{}]</span> <span class="c1">// A collection of structs.</span></code></pre></div> </div> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Unlike NBT, JSON doesn&#8217;t distinguish between primitive arrays and lists&#8201;&#8212;&#8201;it only has an array type. Therefore, <code>byte[]</code> and <code>[byte]</code> means essentially the same thing for JSON validation. </td> </tr> </table></div> </div> </div> <div class="sect2"> <h3 id="tuple-type"> <a href="#tuple-type" class="anchor-heading" aria-labelledby="tuple-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Tuple type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-tuple-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-tuple-type"><em>TupleType</em></a></dt> <dd> <p><code>[</code> <a href="#s-type"><em>Type</em></a> <code>,</code> <code>]</code><br> <code>[</code> <a href="#s-type"><em>Type</em></a> (<code>,</code> <a href="#s-type"><em>Type</em></a>)<sup>+</sup> <code>,</code><sup>?</sup> <code>]</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A tuple type indicates the data must be a collection of certain other types arranged in a specified order.</p> </div> <div class="paragraph"> <p>To distinguish a tuple type containing only one element from a list type, a trailing comma (<code>,</code>) needs to be added after the type. Alternatively, you can also use a list type with size <code>1</code> to represent a tuple with one element (e.g. <code>[byte] @ 1</code>).</p> </div> <div class="exampleblock"> <div class="title">Example 20. Tuple types</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="p">[</span><span class="n">byte</span><span class="p">,]</span>             <span class="c1">// A tuple of a byte.</span>
<span class="p">[</span><span class="n">string</span><span class="p">,</span> <span class="n">boolean</span><span class="p">]</span>   <span class="c1">// A tuple of a string followed by a boolean.</span></code></pre></div> </div> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Tuple types are generally not useful for NBT structures, as NBT doesn&#8217;t have collections of mixed types. </td> </tr> </table></div> </div> </div> <div class="sect2"> <h3 id="enum"> <a href="#enum" class="anchor-heading" aria-labelledby="enum"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enum </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-enum" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-enum"><em>Enum</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <code>enum</code> <code>(</code> <a href="#t-enum-type">ENUM_TYPE</a> <code>)</code> <a href="#t-ident">IDENTIFIER</a><sup>?</sup> <a href="#s-enum-block"><em>EnumBlock</em></a></p> </dd> </dl> </div> <div id="s-enum-block" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-enum-block"><em>EnumBlock</em></a></dt> <dd> <p><code>{</code> <code>}</code> |<br> <code>{</code> <a href="#s-enum-field"><em>EnumField</em></a> (<code>,</code> <a href="#s-enum-field"><em>EnumField</em></a>)<sup>*</sup> <code>,</code><sup>?</sup> <code>}</code></p> </dd> </dl> </div> <div id="s-enum-field" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-enum-field"><em>EnumField</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <a href="#t-ident">IDENTIFIER</a> <code>=</code> <a href="#t-enum-value">ENUM_VALUE</a></p> </dd> </dl> </div><hr> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-enum-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-enum-type">ENUM_TYPE</a></dt> <dd> <p><code>byte</code> | <code>short</code> | <code>int</code> | <code>long</code> | <code>string</code> | <code>float</code> | <code>double</code></p> </dd> </dl> </div> <div id="t-enum-value" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-enum-value">ENUM_VALUE</a></dt> <dd> <p><a href="#t-typed-number">TYPED_NUMBER</a> | <a href="#t-string">STRING</a><br> Although <a href="#t-typed-number">TYPED_NUMBER</a> is expected as the value for enums, the user can write the numbers without the proper suffixes as the mcdoc interpreter is able to infer the proper type from the enum definition.</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> </div> <div class="sect2"> <h3 id="struct"> <a href="#struct" class="anchor-heading" aria-labelledby="struct"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Struct </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-struct" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-struct"><em>Struct</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <code>struct</code> <a href="#t-ident">IDENTIFIER</a><sup>?</sup> <a href="#s-struct-block"><em>StructBlock</em></a></p> </dd> </dl> </div> <div id="s-struct-block" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-struct-block"><em>StructBlock</em></a></dt> <dd> <p><code>{</code> <code>}</code> |<br> <code>{</code> <a href="#s-struct-field"><em>StructField</em></a> (<code>,</code> <a href="#s-struct-field"><em>StructField</em></a>)<sup>*</sup> <code>,</code><sup>?</sup> <code>}</code></p> </dd> </dl> </div> <div id="s-struct-field" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-struct-field"><em>StructField</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <a href="#s-struct-key"><em>StructKey</em></a> <code>?</code><sup>?</sup> <code>:</code> <a href="#s-type"><em>Type</em></a> |<br> <a href="#s-attributes"><em>Attributes</em></a> <code>...</code> <a href="#s-type"><em>Type</em></a><br> For the spreading syntax (<code>...</code>), if the type after the spread operator cannot be resolved as a struct type, only the attributes on the type will be copied over to the current struct.</p> </dd> </dl> </div> <div id="s-struct-key" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-struct-key"><em>StructKey</em></a></dt> <dd> <p><a href="#t-string">STRING</a> |<br> <a href="#t-ident">IDENTIFIER</a> |<br> <code>[</code> <a href="#s-type"><em>Type</em></a> <code>]</code></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A <strong>struct</strong> defines the schema of a dictionary-like structure consisting of key-value pairs, like a JSON object or an NBT compound tag. If a key is duplicated, the type of the later one will override that of the former one. A question mark (<code>?</code>) can be added between the key and the colon (<code>:</code>) to indicate an optional field.</p> </div> <div class="exampleblock"> <div class="title">Example 21. Data pack tag struct</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Tag</span> <span class="p">{</span>
	<span class="n">replace</span><span class="o">?</span><span class="p">:</span> <span class="n">boolean</span><span class="p">,</span>
	<span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="n">string</span><span class="p">],</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> <div class="paragraph"> <p>The <strong>spread operator</strong> (three dots, <code>...</code>) followed by a struct type can be used to reuse fields from another struct.</p> </div> <div class="exampleblock"> <div class="title">Example 22. Spread syntax</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Player</span> <span class="p">{</span>
	<span class="o">...</span><span class="n">Mob</span><span class="p">,</span> <span class="c1">// Reuse fields from the <code>Mob</code> struct here.</span>
	<span class="n">abilities</span><span class="p">:</span> <span class="n">Abilities</span><span class="p">,</span>
	<span class="n">CustomName</span><span class="p">:</span> <span class="p">(),</span> <span class="c1">// Overrides <code>CustomName</code> from the <code>Mob</code> struct to an empty union.</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> <div class="paragraph"> <p>Although type parameters are not directly allowed in struct definitions, you can inline a struct on the right hand side of a type alias definition.</p> </div> <div class="exampleblock"> <div class="title">Example 23. Type parameter</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">type</span> <span class="n">Tag</span><span class="o">&lt;</span><span class="n">V</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span>
	<span class="n">replace</span><span class="o">?</span><span class="p">:</span> <span class="n">boolean</span><span class="p">,</span>
	<span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="n">V</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">BlockTag</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">&lt;</span><span class="nd">#[id=block]</span> <span class="n">string</span><span class="o">&gt;</span>
<span class="k">type</span> <span class="n">EntityTypeTag</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">&lt;</span><span class="nd">#[id=entity_type]</span> <span class="n">string</span><span class="o">&gt;</span>
<span class="k">type</span> <span class="n">FunctionTag</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">&lt;</span><span class="nd">#[id=function]</span> <span class="n">string</span><span class="o">&gt;</span>
<span class="k">type</span> <span class="n">ItemTag</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">&lt;</span><span class="nd">#[id=item]</span> <span class="n">string</span><span class="o">&gt;</span></code></pre></div> </div> </div> </div> </div> <div class="sect2"> <h3 id="reference-type"> <a href="#reference-type" class="anchor-heading" aria-labelledby="reference-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reference type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-reference-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-reference-type"><em>ReferenceType</em></a></dt> <dd> <p><a href="#t-path">PATH</a></p> </dd> </dl> </div> </div> </div> </div> <div class="sect2"> <h3 id="dispatcher-type"> <a href="#dispatcher-type" class="anchor-heading" aria-labelledby="dispatcher-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dispatcher type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-dispatcher-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-dispatcher-type"><em>DispatcherType</em></a></dt> <dd> <p><a href="#t-res-loc">RES_LOC</a> <a href="#s-index-body"><em>IndexBody</em></a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> <div class="paragraph"> <p>The <a href="#dispatcher-fallback-case">fallback case</a> is used when the index is omitted.</p> </div> </div> <div class="sect2"> <h3 id="union-type"> <a href="#union-type" class="anchor-heading" aria-labelledby="union-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Union type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-union-type" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-union-type"><em>UnionType</em></a></dt> <dd> <p><code>(</code> <code>)</code> |<br> <code>(</code> <a href="#s-type"><em>Type</em></a> (<code>|</code> <a href="#s-type"><em>Type</em></a>)<sup>*</sup> <code>|</code><sup>?</sup> <code>)</code><br> A pair of empty parentheses removes this field definition from the struct.kk</p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> </div> <div class="sect2"> <h3 id="indexing-on-a-type"> <a href="#indexing-on-a-type" class="anchor-heading" aria-labelledby="indexing-on-a-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Indexing on a type </h3> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-index-body" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-index-body"><em>IndexBody</em></a></dt> <dd> <p><code>[</code> <a href="#s-index"><em>Index</em></a> (<code>,</code> <a href="#s-index"><em>Index</em></a>)<sup>*</sup> <code>,</code><sup>?</sup> <code>]</code><br> Multiple indices can be put inside the brackets to access multiple types from the target.</p> <div class="exampleblock"> <div class="title">Example 24. Access multiple types from a dispatcher</div> <div class="content"> <div class="paragraph"> <p><code>minecraft:entity[ender_dragon, wither]</code> &#8594; Produces a union of the type for the ender dragon and the type for the wither.</p> </div> <div class="paragraph"> <p><code>minecraft:entity[[id], allay]</code> &#8594; Produces a union of the type for the entity at <code>id</code> dynamically and the allay.</p> </div> </div> </div> </dd> </dl> </div> <div id="s-index" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-index"><em>Index</em></a></dt> <dd> <p><a href="#t-static-index-key">STATIC_INDEX_KEY</a> | <a href="#s-dynamic-index"><em>DynamicIndex</em></a><br></p> </dd> </dl> </div> <div id="s-dynamic-index" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-dynamic-index"><em>DynamicIndex</em></a></dt> <dd> <p><code>[</code> <a href="#t-accessor">ACCESSOR</a> <code>]</code></p> </dd> </dl> </div><hr> <div class="paragraph"> <p><strong>SYNTAX (TOKEN)</strong></p> </div> <div id="t-static-index-key" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-static-index-key">STATIC_INDEX_KEY</a></dt> <dd> <p><code>%fallback</code> | <code>%none</code> | <code>%unknown</code> | <a href="#t-ident">IDENTIFIER</a> | <a href="#t-string">STRING</a> | <a href="#t-res-loc">RES_LOC</a></p> </dd> </dl> </div> <div id="t-accessor" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-accessor">ACCESSOR</a></dt> <dd> <p><a href="#t-accessor-key">ACCESSOR_KEY</a> (<code>.</code> <a href="#t-accessor-key">ACCESSOR_KEY</a>)<sup>*</sup></p> </dd> </dl> </div> <div id="t-accessor-key" class="dlist"> <dl> <dt class="hdlist1"><a href="#t-accessor-key">ACCESSOR_KEY</a></dt> <dd> <p><code>%key</code> | <code>%parent</code> | <a href="#t-ident">IDENTIFIER</a> | <a href="#t-string">STRING</a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>Indices can access a type from a dispatcher or get a field type from an existing struct, both statically (i.e. the user provides the key literally in the mcdoc file) and dynamically (i.e. the user specifies a way to get the key from the given data structure at runtime).</p> </div> <div class="exampleblock"> <div class="title">Example 25. Static and dynamic indices</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
	<span class="n">id</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
	<span class="n">cow_data</span><span class="p">:</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">entity</span><span class="p">[</span><span class="n">cow</span><span class="p">],</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="n">dynamic_entity_data</span><span class="p">:</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">entity</span><span class="p">[[</span><span class="n">id</span><span class="p">]],</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="n">command</span><span class="p">:</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">block</span><span class="p">[</span><span class="n">command_block</span><span class="p">][</span><span class="n">Command</span><span class="p">],</span> <i class="conum" data-value="3"></i><b>(3)</b>
	<span class="n">dynamic_memories</span><span class="p">:</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">entity</span><span class="p">[[</span><span class="n">id</span><span class="p">]][</span><span class="n">Brain</span><span class="p">][</span><span class="n">memories</span><span class="p">],</span> <i class="conum" data-value="4"></i><b>(4)</b>
<span class="p">}</span></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Static index on a dispatcher.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Dynamic index on a dispatcher.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>Static index on a dispatcher, followed by a static index on a struct.</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>Dynamic index on a dispatcher, followed by two static indices on two structs.</td> </tr> </table></div> </div> </div> </div> <div class="paragraph"> <p>The default value used for all cases (including the two mutable special keys, <code>%none</code> and <code>%unknown</code>) is the <a href="#dispatcher-fallback-case">fallback case</a>.</p> </div> <div class="exampleblock"> <div class="title">Example 26. Special static key: <code>%fallback</code></div> <div class="content"> <div class="paragraph"> <p>The <code>%fallback</code> key can be used to access the <a href="#dispatcher-fallback-case">fallback case</a> of a dispatcher. It cannot be used on the left hand side of <a href="#dispatch-statement">dispatch statements</a>, as the fallback case is generated automatically and cannot be manually declared.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">type</span> <span class="n">AnyEntity</span> <span class="o">=</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">entity</span><span class="p">[</span><span class="o">%</span><span class="n">fallback</span><span class="p">]</span></code></pre></div> </div> </div> </div> <div class="exampleblock"> <div class="title">Example 27. Special static key: <code>%none</code></div> <div class="content"> <div class="paragraph"> <p>The case corresponding to <code>%none</code> is used when the accessor of a dynamic index gets no value at runtime.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">RandomIntGenerator</span> <span class="p">{</span>
	<span class="k">type</span><span class="o">?</span><span class="p">:</span> <span class="p">(</span><span class="s">"uniform"</span> <span class="p">|</span> <span class="s">"binomial"</span> <span class="p">|</span> <span class="s">"constant"</span><span class="p">),</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="o">...</span><span class="n">minecraft</span><span class="p">:</span><span class="n">random_int_generator</span><span class="p">[[</span><span class="k">type</span><span class="p">]],</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="p">}</span>

<span class="n">dispatch</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">random_int_generator</span><span class="p">[</span><span class="n">uniform</span><span class="p">,</span> <span class="o">%</span><span class="n">none</span><span class="p">]</span> <span class="n">to</span> <span class="k">struct</span> <span class="p">{</span> <span class="n">min</span><span class="o">?</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">max</span><span class="o">?</span><span class="p">:</span> <span class="nb">int</span> <span class="p">}</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Note that <code>type</code> is defined as optional here.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The value of <code>type</code> at runtime is used as a dynamic index here.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>The case corresponding to <code>%none</code> is dispatched to the struct here, so the random int generator can still get validated as a uniform generator properly when no value for <code>type</code> is provided at runtime.</td> </tr> </table></div> </div> </div> </div> <div class="exampleblock"> <div class="title">Example 28. Special static key: <code>%unknown</code></div> <div class="content"> <div class="paragraph"> <p>The case corresponding to <code>%unknown</code> is used when an unknown key is used to access the dispatcher.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="n">dispatch</span> <span class="n">minecraft</span><span class="p">:</span><span class="n">block</span><span class="p">[</span><span class="o">%</span><span class="n">unknown</span><span class="p">]</span> <span class="nf">to</span> <span class="p">()</span></code></pre></div> </div> </div> </div> <div class="exampleblock"> <div class="title">Example 29. Special accessor key: <code>%key</code></div> <div class="content"> <div class="paragraph"> <p>The <code>%key</code> accessor key can be used to access the key where the current runtime value is.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">DebugStick</span> <span class="p">{</span>
	<span class="n">DebugProperty</span><span class="p">:</span> <span class="k">struct</span> <span class="p">{</span>
		<span class="p">[</span><span class="nd">#[id=block]</span> <span class="n">string</span><span class="p">]:</span> <span class="n">mcdoc</span><span class="p">:</span><span class="n">block_state_name</span><span class="p">[[</span><span class="o">%</span><span class="n">key</span><span class="p">]],</span> <span class="c1">// Get the type of the block state names of the block stored in the key.</span>
	<span class="p">},</span>
<span class="p">}</span></code></pre></div> </div> <div class="paragraph"> <p>This struct can be used to validate the following data:</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
	</span><span class="nl">"DebugProperty"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
		</span><span class="nl">"minecraft:anvil"</span><span class="p">:</span><span class="w"> </span><span class="s2">"facing"</span><span class="p">,</span><span class="w">
		</span><span class="nl">"minecraft:oak_fence"</span><span class="p">:</span><span class="w"> </span><span class="s2">"east"</span><span class="w">
	</span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></div> </div> </div> </div> <div class="exampleblock"> <div class="title">Example 30. Special accessor key: <code>%parent</code></div> <div class="content"> <div class="paragraph"> <p>The <code>%parent</code> accessor key can be used to access the parent value of the current runtime value.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Item</span> <span class="p">{</span>
	<span class="n">id</span><span class="p">:</span> <span class="nd">#[id=item]</span> <span class="n">string</span><span class="p">,</span>
	<span class="n">tag</span><span class="p">:</span> <span class="k">struct</span> <span class="n">ItemTag</span> <span class="p">{</span>
		<span class="n">BlockStateTag</span><span class="p">:</span> <span class="n">mcdoc</span><span class="p">:</span><span class="n">block_item_states</span><span class="p">[[</span><span class="o">%</span><span class="n">parent</span><span class="py">.id</span><span class="p">]]</span>
	<span class="p">},</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="file-structure"> <a href="#file-structure" class="anchor-heading" aria-labelledby="file-structure"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> File Structure </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-file" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-file"><em>File</em></a></dt> <dd> <p>(<a href="#s-struct"><em>Struct</em></a> | <a href="#s-enum"><em>Enum</em></a> | <a href="#s-type-alias"><em>TypeAlias</em></a> | <a href="#s-use"><em>UseStatement</em></a> | <a href="#s-inject"><em>Injection</em></a> | <a href="#s-dispatch"><em>DispatchStatement</em></a>)<sup>*</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>An mcdoc is made of <a href="#struct">structs</a>, <a href="#enum">enums</a>, <a href="#type-alias-statement">type alias statements</a>, <a href="#use-statement">use statements</a>, <a href="#injection">injections</a>, and <a href="#dispatch-statement">dispatch statements</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="type-alias-statement"> <a href="#type-alias-statement" class="anchor-heading" aria-labelledby="type-alias-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type alias statement </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-type-alias" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-type-alias"><em>TypeAlias</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <code>type</code> <a href="#t-ident">IDENTIFIER</a> <a href="#s-type-param-block"><em>TypeParamBlock</em></a><sup>?</sup> <code>=</code> <a href="#s-type"><em>Type</em></a></p> </dd> </dl> </div> <div id="s-type-param-block" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-type-param-block"><em>TypeParamBlock</em></a></dt> <dd> <p><code>&lt;</code> <code>&gt;</code> |<br> <code>&lt;</code> <a href="#s-type-param"><em>TypeParam</em></a> (<code>,</code> <a href="#s-type-param"><em>TypeParam</em></a>)<sup>*</sup> <code>,</code><sup>?</sup> <code>&gt;</code></p> </dd> </dl> </div> <div id="s-type-param" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-type-param"><em>TypeParam</em></a></dt> <dd> <p><a href="#t-ident">IDENTIFIER</a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A type alias can be created to refer to another complicated type for better code readability and reusability.</p> </div> <div class="exampleblock"> <div class="title">Example 31. Type aliases</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">type</span> <span class="n">Integer</span> <span class="o">=</span> <span class="p">(</span><span class="n">byte</span> <span class="p">|</span> <span class="n">short</span> <span class="p">|</span> <span class="nb">int</span> <span class="p">|</span> <span class="n">long</span><span class="p">)</span>
<span class="k">type</span> <span class="n">Float</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span> <span class="p">|</span> <span class="n">double</span><span class="p">)</span>
<span class="k">type</span> <span class="n">Number</span> <span class="o">=</span> <span class="p">(</span><span class="n">Integer</span> <span class="p">|</span> <span class="n">Float</span><span class="p">)</span></code></pre></div> </div> </div> </div> <div class="paragraph"> <p>Sometimes we may want to create different type definitions that have roughly the same structure and only differ in some small aspects. Instead of duplicating codes, we can create a "template" type alias with <strong>type parameters</strong>. The right-hand side of the type alias statement can then <a href="#reference-type">reference</a> those type parameters, which will get replaced by actual types when the type alias is instantiated elsewhere.</p> </div> <div class="exampleblock"> <div class="title">Example 32. Type aliases with type parameters</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">type</span> <span class="n">NumericRange</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="n">T</span> <span class="p">|</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">T</span><span class="p">]</span> <span class="p">|</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="k">struct</span> <span class="p">{</span> <span class="n">min</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span> <span class="n">max</span><span class="p">:</span> <span class="n">T</span> <span class="p">}</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="p">)</span>

<span class="k">type</span> <span class="n">FloatRange</span> <span class="o">=</span> <span class="n">NumericRange</span><span class="o">&lt;</span><span class="nb">float</span><span class="o">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="k">type</span> <span class="n">IntegerRange</span> <span class="o">=</span> <span class="n">NumericRange</span><span class="o">&lt;</span><span class="nb">int</span><span class="o">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="k">type</span> <span class="n">NaturalRange</span> <span class="o">=</span> <span class="n">NumericRange</span><span class="o">&lt;</span><span class="nb">int</span> <span class="o">@</span> <span class="mi">0</span><span class="o">..&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The type parameter <code>T</code> is declared in the angle brackets.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The type parameter <code>T</code> can now be referenced on the right-hand side.</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>When the <code>NumericRange</code> type alias is referenced elsewhere, an actual type must be suplied for the type parameter.</td> </tr> </table></div> </div> </div> </div> <div class="sect2"> <h3 id="binding-type-parameters"> <a href="#binding-type-parameters" class="anchor-heading" aria-labelledby="binding-type-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Binding type parameters </h3> <div class="paragraph"> <p>All path references are resolved by the rules described in <a href="#path">Path</a>, and type parameter references are no exceptions. When a type parameter is declared in a type alias statement, it is temporarily bound to the current module until the end of the statement. Therefore, just like other type definitions, type parameters should be unique at the module scope.</p> </div> <div class="exampleblock"> <div class="title">Example 33. Duplicated type parameter identifiers</div> <div class="content"> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="c1">// File '/example.mcdoc'</span>

<span class="k">struct</span> <span class="n">T</span> <span class="p">{}</span>

<span class="k">type</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="n">T</span><span class="p">]</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="c1">//        ^</span>
<span class="c1">//        WARNING: Duplicated declaration for "::example::T"</span></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The declaration for <code>T</code> is warned and ignored, and the reference of <code>T</code> on the right-hand side actually refers to the struct <code>T</code> defined above.</td> </tr> </table></div> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">type</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="n">T</span><span class="p">]</span>

<span class="k">type</span> <span class="n">Struct</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">struct</span> <span class="p">{</span> <span class="n">value</span><span class="p">:</span> <span class="n">T</span> <span class="p">}</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre></div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>This is fine, as although <code>T</code> is also declared in the <code>List</code> type alias statement, the effect of that declaration only lives until the end of that statement.</td> </tr> </table></div> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="use-statement"> <a href="#use-statement" class="anchor-heading" aria-labelledby="use-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Use statement </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-use" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-use"><em>UseStatement</em></a></dt> <dd> <p><code>use</code> <a href="#t-path">PATH</a> (<code>as</code> <a href="#t-ident">IDENTIFIER</a>)<sup>?</sup></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> </div> </div> <div class="sect1"> <h2 id="injection"> <a href="#injection" class="anchor-heading" aria-labelledby="injection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Injection </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-inject" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-inject"><em>Injection</em></a></dt> <dd> <p><code>inject</code> (<a href="#s-enum-inject"><em>EnumInjection</em></a> | <a href="#s-struct-inject"><em>StructInjection</em></a>)</p> </dd> </dl> </div> <div id="s-enum-inject" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-enum-inject"><em>EnumInjection</em></a></dt> <dd> <p><code>enum</code> <code>(</code> <a href="#t-enum-type">ENUM_TYPE</a> <code>)</code> <a href="#t-path">PATH</a> <a href="#s-enum-block"><em>EnumBlock</em></a></p> </dd> </dl> </div> <div id="s-struct-inject" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-struct-inject"><em>StructInjection</em></a></dt> <dd> <p><code>struct</code> <a href="#t-path">PATH</a> <a href="#s-struct-block"><em>StructBlock</em></a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>TODO</p> </div> </div> </div> <div class="sect1"> <h2 id="dispatch-statement"> <a href="#dispatch-statement" class="anchor-heading" aria-labelledby="dispatch-statement"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dispatch statement </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-dispatch" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-dispatch"><em>DispatchStatement</em></a></dt> <dd> <p><a href="#s-prelim"><em>Prelim</em></a> <code>dispatch</code> <a href="#t-res-loc">RES_LOC</a> <a href="#s-index-body"><em>IndexBody</em></a><sub>nochild: <a href="#s-dynamic-index"><em>DynamicIndex</em></a></sub> <a href="#s-type-param-block"><em>TypeParamBlock</em></a><sup>?</sup> <code>to</code> <a href="#s-type"><em>Type</em></a></p> </dd> </dl> </div> </div> </div> <div class="paragraph"> <p>A <strong>dispatcher</strong> can be used to dispatch to a specific type from a given index. Each case of a dispatcher can be declared by a <a href="#s-dispatch"><em>DispatchStatement</em></a> and accessed by a <a href="#s-dispatcher-type"><em>DispatcherType</em></a>.</p> </div> <div class="paragraph"> <p>Dispatchers are named after <a href="#resource-location">Resource location</a>s, so unlike other values in mcdoc that are named after <a href="#identifier">Identifier</a>s which require <a href="#use-statement">being imported</a> before they can be used in an external file, dispatchers are inherently global and can be accessed anywhere inside an mcdoc project.</p> </div> <div id="dispatcher-fallback-case" class="paragraph"> <div class="title">Fallback case</div> <p>When an unknown index is used to access a dispatcher, a union consisting of all types registered under the dispatcher is generated as a <strong>fallback case</strong> at runtime. The union is marked with the "nonexhaustive" metadata.</p> </div> <div class="paragraph"> <p>TODO</p> </div> </div> </div> <div class="sect1"> <h2 id="attribute"> <a href="#attribute" class="anchor-heading" aria-labelledby="attribute"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attribute </h2> <div class="sectionbody"> <div class="sidebarblock"> <div class="content"> <div class="paragraph"> <p><strong>SYNTAX</strong></p> </div> <div id="s-attributes" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attributes"><em>Attributes</em></a></dt> <dd> <p><a href="#s-attribute"><em>Attribute</em></a><sup>*</sup></p> </dd> </dl> </div> <div id="s-attribute" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute"><em>Attribute</em></a></dt> <dd> <p><code>#[</code> <a href="#t-ident">IDENTIFIER</a> <code>]</code> |<br> <code>#[</code> <a href="#t-ident">IDENTIFIER</a> <code>=</code> <a href="#s-attribute-value"><em>Value</em></a> <code>]</code> |<br> <code>#[</code> <a href="#t-ident">IDENTIFIER</a> <a href="#s-attribute-tree-value"><em>TreeValue</em></a> <code>]</code></p> </dd> </dl> </div> <div id="s-attribute-value" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-value"><em>Value</em></a></dt> <dd> <p><a href="#s-type"><em>Type</em></a> | <a href="#s-attribute-tree-value"><em>TreeValue</em></a></p> </dd> </dl> </div> <div id="s-attribute-tree-value" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-tree-value"><em>TreeValue</em></a></dt> <dd> <p><code>(</code> <a href="#s-attribute-tree-body"><em>TreeBody</em></a><sup>?</sup> <code>)</code> |<br> <code>[</code> <a href="#s-attribute-tree-body"><em>TreeBody</em></a><sup>?</sup> <code>]</code> |<br> <code>{</code> <a href="#s-attribute-tree-body"><em>TreeBody</em></a><sup>?</sup> <code>}</code></p> </dd> </dl> </div> <div id="s-attribute-tree-body" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-tree-body"><em>TreeBody</em></a></dt> <dd> <p><a href="#s-attribute-positional-values"><em>PositionalValues</em></a> <code>,</code><sup>?</sup> |<br> <a href="#s-attribute-named-values"><em>NamedValues</em></a> <code>,</code><sup>?</sup> |<br> <a href="#s-attribute-positional-values"><em>PositionalValues</em></a> <code>,</code> <a href="#s-attribute-named-values"><em>NamedValues</em></a> <code>,</code><sup>?</sup></p> </dd> </dl> </div> <div id="s-attribute-positional-values" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-positional-values"><em>PositionalValues</em></a></dt> <dd> <p><a href="#s-attribute-value"><em>Value</em></a> (<code>,</code> <a href="#s-attribute-value"><em>Value</em></a>)<sup>*</sup></p> </dd> </dl> </div> <div id="s-attribute-named-values" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-named-values"><em>NamedValues</em></a></dt> <dd> <p><a href="#s-attribute-named-value"><em>NamedValue</em></a> (<code>,</code> <a href="#s-attribute-named-value"><em>NamedValue</em></a>)<sup>*</sup></p> </dd> </dl> </div> <div id="s-attribute-named-value" class="dlist"> <dl> <dt class="hdlist1"><a href="#s-attribute-named-value"><em>NamedValue</em></a></dt> <dd> <p>(<a href="#t-ident">IDENTIFIER</a> | <a href="#t-string">STRING</a>) <code>=</code> <a href="#s-attribute-value"><em>Value</em></a> |<br> (<a href="#t-ident">IDENTIFIER</a> | <a href="#t-string">STRING</a>) <a href="#s-attribute-tree-value"><em>TreeValue</em></a></p> </dd> </dl> </div> </div> </div> <div class="exampleblock"> <div class="title">Example 34. Attribute examples (non-final)</div> <div class="content"> <div class="paragraph"> <p>All following examples are <strong>syntactically</strong> legal under the current attribute proposal. Which ones should be <strong>semantically</strong> legal, however, is still under debate.</p> </div> <div class="listingblock"> <div class="content"><pre class="rouge highlight"><code data-lang="rust"><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
	<span class="nd">#[id=item]</span>
	<span class="n">id1</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
	<span class="n">id2</span><span class="p">:</span> <span class="nd">#[id=item]</span> <span class="n">string</span><span class="p">,</span>
	<span class="c1">// id1 and id2 will likely both be supported and have equivalent effects.</span>

	<span class="n">blockStateValue1</span><span class="p">:</span> <span class="p">(</span>
		<span class="nd">#[serializable]</span> <span class="n">string</span> <span class="p">|</span>
		<span class="n">byte</span> <span class="p">|</span> <span class="n">short</span> <span class="p">|</span> <span class="nb">int</span> <span class="p">|</span> <span class="n">long</span> <span class="p">|</span> <span class="nb">float</span> <span class="p">|</span> <span class="n">double</span>
	<span class="p">),</span>
	<span class="nd">#[serialize_to=string]</span>
	<span class="n">blockStateValue2</span><span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="p">|</span> <span class="n">byte</span> <span class="p">|</span> <span class="n">short</span> <span class="p">|</span> <span class="nb">int</span> <span class="p">|</span> <span class="n">long</span> <span class="p">|</span> <span class="nb">float</span> <span class="p">|</span> <span class="n">double</span><span class="p">),</span>

	<span class="n">evilUUID1</span><span class="p">:</span> <span class="p">(</span>
		<span class="nd">#[until(</span><span class="s">"1.16"</span><span class="nd">,</span> <span class="nd">uuid_string_to_compound)]</span> <span class="nd">#[parser=uuid]</span> <span class="n">string</span> <span class="p">|</span>
		<span class="nd">#[until(</span><span class="s">"1.17"</span><span class="nd">,</span> <span class="nd">uuid_compound_to_array)]</span> <span class="n">MostLeastCompound</span> <span class="p">|</span>
		<span class="nb">int</span><span class="p">[]</span> <span class="o">@</span> <span class="mi">4</span>
	<span class="p">),</span>
	<span class="nd">#[history</span><span class="err">{</span>
		<span class="nd">(</span><span class="err">#[</span><span class="nd">parser=uuid]</span> <span class="n">string</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s">"1.16"</span><span class="p">,</span> <span class="n">updater</span><span class="o">=</span><span class="n">uuid_string_to_compound</span><span class="p">),</span>
		<span class="p">(</span><span class="n">MostLeastCompound</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="s">"1.17"</span><span class="p">,</span> <span class="n">updater</span><span class="o">=</span><span class="n">uuid_compound_to_array</span><span class="p">),</span>
	<span class="p">}]</span>
	<span class="n">evilUUID2</span><span class="p">:</span> <span class="nb">int</span><span class="p">[]</span> <span class="o">@</span> <span class="mi">4</span>
<span class="p">}</span></code></pre></div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="type-instantiation"> <a href="#type-instantiation" class="anchor-heading" aria-labelledby="type-instantiation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type instantiation </h2> <div class="sectionbody"> <div class="paragraph"> <p><a href="#type">Type</a> instantiation is the process of converting a user-defined type into a type that is easy for data validators to consume. A user-defined type can be categorized as follows for instantiation purposes:</p> </div> <div class="dlist"> <dl> <dt class="hdlist1">Indexed type</dt> <dd> <p>An <a href="#indexing-on-a-type">indexed type</a>.</p> </dd> <dt class="hdlist1">Self-contained type</dt> <dd> <p>A type where all information needed for data validators to function are contained inside the type itself. Includes <a href="#any-type"><code>any</code> type</a>, <a href="#boolean-type"><code>boolean</code> type</a>, <a href="#string-type"><code>string</code> type</a>, <a href="#literal-boolean-type">Literal boolean type</a>, <a href="#literal-string-type">Literal string type</a>, <a href="#literal-number-type">Literal number type</a>, <a href="#numeric-type">Numeric type</a>, <a href="#primitive-array-type">Primitive array type</a>, and <a href="#enum">Enum</a>.</p> </dd> <dt class="hdlist1">Container type</dt> <dd> <p>A type that provides some information on its own, but needs information from its children for the validation to be complete. Includes <a href="#list-type">List type</a>, <a href="#tuple-type">Tuple type</a>, and <a href="#struct">Struct</a>.</p> </dd> <dt class="hdlist1">Reference type</dt> <dd> <p>A <a href="#reference-type">Reference type</a>.</p> </dd> <dt class="hdlist1">Dispatcher type</dt> <dd> <p>A <a href="#dispatcher-type">Dispatcher type</a>.</p> </dd> <dt class="hdlist1">Union type</dt> <dd> <p>A <a href="#union-type">Union type</a>.</p> </dd> </dl> </div> <div class="paragraph"> <p>Different procedures are used to instantiate each category of user-defined types.</p> </div> <div class="sect2"> <h3 id="instantiate-indexed-type"> <a href="#instantiate-indexed-type" class="anchor-heading" aria-labelledby="instantiate-indexed-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instantiate indexed type </h3> <div class="paragraph"> <p>First instantiate the part without the indices, then resolve the index on the instantiated type. Repeat until all indices are resolved.</p> </div> </div> <div class="sect2"> <h3 id="instantiate-self-contained-type"> <a href="#instantiate-self-contained-type" class="anchor-heading" aria-labelledby="instantiate-self-contained-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instantiate self-contained type </h3> <div class="paragraph"> <p>Self-contained types do not need to be instantiated.</p> </div> </div> <div class="sect2"> <h3 id="instantiate-container-type"> <a href="#instantiate-container-type" class="anchor-heading" aria-labelledby="instantiate-container-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instantiate container type </h3> <div class="paragraph"> <p>Container types do not need to be instantiated. Their children are instantiated when needed lazily.</p> </div> </div> <div class="sect2"> <h3 id="instantiate-reference-type"> <a href="#instantiate-reference-type" class="anchor-heading" aria-labelledby="instantiate-reference-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instantiate reference type </h3> <div class="paragraph"> <p>Dereference the path.</p> </div> <div class="paragraph"> <p>If there are type parameters, replace all occurrences of them in the template type with the provided actual types. The resulted type is then instantiated again following the instantiation rules.</p> </div> </div> <div class="sect2"> <h3 id="instantiate-dispatcher-type"> <a href="#instantiate-dispatcher-type" class="anchor-heading" aria-labelledby="instantiate-dispatcher-type"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Instantiate dispatcher type </h3> <div class="paragraph"> <p>Dispatch the type. The resulted type is then instantiated again following the instantiation rules.</p> </div> </div> <div class="sect2"> <h3 id="union-type-2"> <a href="#union-type-2" class="anchor-heading" aria-labelledby="union-type-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Union type </h3> <div class="paragraph"> <p>Each member type of the union is individually instantiated.</p> </div> </div> <div class="sect2"> <h3 id="aftermath-of-instantiation"> <a href="#aftermath-of-instantiation" class="anchor-heading" aria-labelledby="aftermath-of-instantiation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Aftermath of instantiation </h3> <div class="paragraph"> <p>After a type is instantiated following the above rules, it should be <a href="#type-simplification">simplified</a> before being returned.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="type-simplification"> <a href="#type-simplification" class="anchor-heading" aria-labelledby="type-simplification"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type simplification </h2> <div class="sectionbody"> <div class="paragraph"> <p>TODO</p> </div> <div class="paragraph"> <p>To simplify a union type, any members that can be assigned to another member will be removed from the union.</p> </div> <div class="sect2"> <h3 id="shadowed-types"> <a href="#shadowed-types" class="anchor-heading" aria-labelledby="shadowed-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Shadowed types </h3> <div class="paragraph"> <p>TODO</p> </div> <div class="paragraph"> <p>Although simplifying <code>(string | "foo" | "bar")</code> into <code>string</code> is sound, we lose some more specific information about the original type that could be used by processors like auto completers. Therefore, for certain special cases, types that are trimmed during simplification may be accessible under the <code>shadowedTypes</code> property of the simplified type.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="type-assignability"> <a href="#type-assignability" class="anchor-heading" aria-labelledby="type-assignability"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Type assignability </h2> <div class="sectionbody"> <div class="paragraph"> <p>Types in mcdoc can be think of as sets. Type A is assignable to type B if and only if A is a subset of B. <code>any</code> is the universal set that contains all other types, and an empty union (<code>()</code>) is the empty set. <code>unsafe</code> (well, <code>any</code> is TypeScript&#8217;s <code>unknown</code> and <code>unsafe</code> is TypeScript&#8217;s <code>any</code>. A config rule will also be added to make <code>any</code> equivalent to <code>unsafe</code> that&#8217;s enabled by default so most users don&#8217;t have to deal with a tediously sound validation mechanism, as vanilla-mcdoc will probably use <code>any</code> instead of <code>unsafe</code> for marker&#8217;s <code>data</code>, which would make it illegal to assign it anywhere else that&#8217;s not an <code>any</code> or <code>unsafe</code> under a sound type system. I will update the docs and code later to add the <code>unsafe</code> type) is a monster that&#8217;s both <code>any</code> and <code>()</code>.</p> </div> <div class="paragraph"> <p>TODO</p> </div> <div class="paragraph"> <p>TODO: Data validator hooks can contribute additional type assignability rules. e.g.</p> </div> <div class="ulist"> <ul> <li> <p>For JSON: <code>byte = short = int = long = float = double</code></p> </li> <li> <p>For NBT: <code>boolean = (byte @ 0..1) ⊂ byte</code></p> </li> </ul> </div> </div> </div> <div class="sect1"> <h2 id="branding"> <a href="#branding" class="anchor-heading" aria-labelledby="branding"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Branding </h2> <div class="sectionbody"> <div class="paragraph"> <p>"Mcdoc" is a common noun and should only have its first letter capitalized when it&#8217;s grammatically required to (e.g. at the beginning of the sentence).</p> </div> </div> </div> <div class="sect1"> <h2 id="credits"> <a href="#credits" class="anchor-heading" aria-labelledby="credits"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Credits </h2> <div class="sectionbody"> <div class="paragraph"> <p>The mcdoc format takes heavy inspiration from the <a href="https://github.com/Yurihaia/nbtdoc-rs">nbtdoc format</a> created by <a href="https://github.com/Yurihaia">Yurihaia</a>, licensed under the <a href="https://github.com/Yurihaia/nbtdoc-rs/blob/master/LICENSE-MIT">MIT License</a>. <a href="https://github.com/misode">Misode</a>, <a href="https://github.com/MulverineX">MulverineX</a>, <a href="https://github.com/NeunEinser">NeunEinser</a>, and <a href="https://github.com/vdvman1">vdvman1</a> also have provided valuable feedback for the mcdoc format.</p> </div> <div class="paragraph"> <p>This documentation is written with <a href="https://docs.asciidoctor.org/asciidoc/latest/">AsciiDoc</a>.</p> </div> </div> </div> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/SpyglassMC/Spyglass/tree/main/docs/user/mcdoc/specification.adoc" id="edit-this-page">View the page source on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
